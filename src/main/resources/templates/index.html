<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio - Sistema de Reservas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/custom.css">
</head>
<body>

    <!-- Navbar -->
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <!-- Hero Section -->
    <section class="hero"></section>

    <!-- Imagen del hotel (FIXED) -->
    <img th:src="@{/images/hotel.png}" alt="Hotel" class="hotel-img" id="hotelImg">

   <!-- Info Section -->
    <section class="info-section" id="infoSection">
        <div class="info-content">
            <div class="info-text">
                <span class="eyebrow">BAY HARBOUR SUITES</span>
                <h2>Espacios diseñados para sentirse bien</h2>
                <p class="highlight">
                    Selecciona el espacio que encaja contigo: desde opciones esenciales hasta suites amplias con acabados premium.
                </p>
                
                <div sec:authorize="hasRole('ADMIN')">
                    <a href="/habitaciones-disponibles" class="hero-button">Explorar Habitaciones</a>
                </div>
            </div>
            <!-- Espaciador para la imagen -->
            <div class="image-spacer"></div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const hotelImg = document.getElementById('hotelImg');
        const heroSection = document.querySelector('.hero');
        const infoSection = document.getElementById('infoSection');
        
        // Tamaños inicial y final
        const START_WIDTH = 550;   // MASIVA en hero
        const END_WIDTH = 420;     //  info section
        
        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            const heroHeight = heroSection.offsetHeight;
            
            const transitionStart = 0;
            const transitionEnd = heroHeight * 0.8;
            
            // Calcular progreso (0 a 1)
            const progress = Math.min(Math.max((scrollY - transitionStart) / (transitionEnd - transitionStart), 0), 1);
            
            // Easing suave
            const easeProgress = progress < 0.5 
                ? 2 * progress * progress 
                : 1 - Math.pow(-2 * progress + 2, 2) / 2;
            
            // Calcular ancho actual
            const currentWidth = START_WIDTH - (easeProgress * (START_WIDTH - END_WIDTH));
            
            // Aplicar transformación
            hotelImg.style.width = `${currentWidth}px`;
        });
        
        // Inicializar
        window.dispatchEvent(new Event('scroll'));
    </script>
</body>
</html>
